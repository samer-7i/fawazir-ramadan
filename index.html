<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Remy ğŸ®</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg: #0a1120; --card: #162136; --blue: #38bdf8; --text: #ffffff; --red: #e94560; --gold: #f59e0b; }
        
     
      

        body { margin: 0; padding: 20px; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
        .user-logo { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--blue); margin-bottom: 20px; object-fit: cover; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .setup-card { background: var(--card); padding: 30px; border-radius: 25px; border: 2px solid var(--blue); max-width: 400px; width: 85%; text-align: center; }
        input { width: 90%; padding: 15px; border-radius: 12px; border: 1px solid var(--blue); background: #0a1120; color: white; text-align: center; font-size: 1.1em; margin: 15px 0; outline: none; }
        .btn-action { background: var(--blue); color: var(--bg); border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; }
        .main-card { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid rgba(56, 189, 248, 0.2); max-width: 500px; width: 100%; display: none; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .user-info { display: flex; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 10px 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid rgba(56,189,248,0.2); font-size: 0.9em; }
        .timer-bar { width: 100%; height: 6px; background: rgba(255,255,255,0.1); margin-bottom: 20px; border-radius: 3px; overflow: hidden; }
        #timer-progress { width: 100%; height: 100%; background: var(--blue); transition: width 0.1s linear; }
        .opt-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 1px solid var(--blue); background: rgba(56, 189, 248, 0.05); color: white; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: bold; transition: 0.2s; }
        .opt-btn:active { transform: scale(0.98); background: var(--blue); color: #000; }
        .opt-btn:disabled { opacity: 0.4; cursor: not-allowed; }
        #status-msg { margin-top: 15px; font-weight: bold; font-size: 1.1em; }
        .podium { display: flex; justify-content: space-around; align-items: flex-end; margin-top: 20px; gap: 10px; }
        .rank-card { background: rgba(255,255,255,0.03); border-radius: 15px; padding: 10px; width: 32%; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .rank-1 { border-color: var(--gold); background: rgba(245, 158, 11, 0.05); }
        .prize-text { font-size: 0.75em; color: var(--blue); display: block; margin-top: 5px; font-weight: bold; }
        .footer { margin-top: 30px; padding: 15px; font-size: 0.85em; color: rgba(255, 255, 255, 0.5); text-align: center; }
        .footer a { color: var(--blue); text-decoration: none; font-weight: bold; }

        @media (max-width: 400px) { .fixed-prizes { top: 10px; right: 10px; scale: 0.85; } }
    </style>
</head>
<body>

  


    <img src="logo.png" class="user-logo" onerror="this.style.display='none'">

    <div id="setup-overlay" class="overlay">
        <div class="setup-card" id="rules-step">
            <h2 style="color: var(--blue);">ğŸ“œ Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h2>
            <div style="text-align: right; font-size: 0.9em; line-height: 1.6;">
                 <li>âœ… Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø± Ø¶Ø±ÙˆØ±ÙŠØ© .</li>
                <li>âœ… Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ ÙƒÙ„ ÙØ²ÙˆØ±Ø©.</li>
                <li>âœ… Ø£Ø³Ø±Ø¹ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø·.</li>
                <li>âœ… ÙŠØªÙ… ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø¨Ø¹Ø¯ Ø±Ù…Ø¶Ø§Ù† Ø¹Ù„Ù‰ Ø£ÙˆÙ„ 3 ÙØ§Ø¦Ø²ÙŠÙ†.</li>
                <li>âœ… ÙŠÙ…Ù†Ø¹ Ø§Ù„ØºØ´ Ø¨Ø¬Ù…ÙŠØ¹ Ø£Ø´ÙƒØ§Ù„Ù‡.</li>
                <li>âœ… ÙŠÙ…Ù†Ø¹ ØªØºÙŠÙŠØ± Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø¶Ù…Ø§Ù† Ø­ÙØ¸ Ø§Ù„Ù†Ù‚Ø§Ø·.</li>
                <li>âœ… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø¬Ù…Ø¹Ø© Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© .</li>
                
            </div><br>
            <button class="btn-action" onclick="showNameInput()">Ù…ÙˆØ§ÙÙ‚ âœ…</button>
        </div>
        <div class="setup-card" id="name-step" style="display: none;">
            <h2>Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ ğŸ®</h2>
            <input type="text" id="username-input" placeholder="Ø§Ø³Ù…Ùƒ ÙÙŠ Ø¬Ø§ÙƒÙˆ...">
            <button class="btn-action" onclick="saveAndStart()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ğŸš€</button>
        </div>
    </div>

    <div id="waiting-msg" style="display:none; text-align:center; width: 100%; max-width: 500px;">
        <h3 style="color: var(--blue);">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø£Ù† ÙŠØ¨Ø¯Ø£ Remy Ø§Ù„Ø³Ø¤Ø§Ù„... âŒ›</h3>
        <p>Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span id="wait-points" style="font-weight: bold; color: var(--gold);">0</span></p>
        
  
    </div>

    <div id="quiz-container" class="main-card">
        <div class="timer-bar"><div id="timer-progress"></div></div>
        <div class="user-info">
            <span id="display-name" style="color: var(--blue); font-weight: bold;">---</span>
            <span>Ù†Ù‚Ø§Ø·ÙŠ: <span id="my-points" style="color: var(--blue); font-weight: bold;">0</span> Ù†</span>
        </div>
        <div id="question-text" style="font-size: 1.4em; margin-bottom: 20px; font-weight: bold;"></div>
        <div id="options-container"></div>
        <div id="status-msg"></div>
    </div>

    <script>
        const config = { 
            apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
            authDomain: "fawazir-jaco.firebaseapp.com",
            databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fawazir-jaco",
            storageBucket: "fawazir-jaco.firebasestorage.app",
            messagingSenderId: "862747657100",
            appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
        };
        firebase.initializeApp(config);
        const db = firebase.database();

        let userName = localStorage.getItem("remy_name_v4");
        let userID = localStorage.getItem("remy_id_v4");
        let timerInterval;

        const myQuestions = [
        
 { q: "ÙˆØ´ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠÙˆØµÙ„Ùƒ Ø¨ÙŠØªÙƒ ÙˆÙ„Ø§ ÙŠØªØ­Ø±ÙƒØŸ", options: ["Ø§Ù„Ø³ÙŠØ§Ø±Ù‡", "Ø§Ù„Ø¯Ø¨Ø§Ø¨", "Ø§Ù„Ø·Ø±ÙŠÙ‚"], correct: 2 },

{ q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø§Ø¨ØªÙ„Ø¹Ù‡ Ø§Ù„Ø­ÙˆØªØŸ", options: ["Ù…ÙˆØ³Ù‰", "Ø¹ÙŠØ³Ù‰", "ÙŠÙˆÙ†Ø³"], correct: 2 },

{ q: "Ù…Ø§Ø±ÙƒØ© Ø³Ø§Ø¹Ø§Øª ÙØ§Ø®Ø±Ø© Ø´Ø¹Ø§Ø±Ù‡Ø§ ØªØ§Ø¬ØŒ ÙÙ…Ø§ Ù‡ÙŠØŸ", options: ["ÙØ±Ø²Ø§ØªØ´ÙŠ", "Ø±ÙˆÙ„ÙƒØ³", "Ø¨Ù„Ù†Ø³ÙŠØ§Ù‚Ø§"], correct: 1 },

{ q: "Ø£Ø±Ø³Ù… Ø§Ù„Ø¹ÙŠÙ† Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ø±ÙÙŠØ¹ ÙˆØ£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù…Ø¬Ù†Ù‘Ø­ ÙˆÙ„Ø§ Ø£Ø³ØªØºÙ†ÙŠ Ø¹Ù† Ø§Ù„Ù‚Ù„Ù… Ø§Ù„Ø£Ø³ÙˆØ¯.. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["Ø§ÙŠÙ„Ø§ÙŠÙ†Ø±", "Ù…Ø§Ø³ÙƒØ§Ø±Ø§", "Ø§ÙŠ Ø´Ø§Ø¯Ùˆ"], correct: 0 },

{ q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ùƒ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ Ø¨Ø§Ù„ÙˆØ­ÙŠØŸ", options: ["Ø¬Ø¨Ø±ÙŠÙ„", "Ù…ÙŠÙƒØ§ÙŠÙ„", "Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„"], correct: 0 },

{ q: "Ø£Ù†Ø§ Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© Ø¨Ø§Ù„Ù…ÙŠÙƒ Ø§Ø¨ Ø£Ø¬Ù‡Ø² Ø¨Ø´Ø±ØªÙƒ ÙˆØ£Ø®ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ù… ÙˆØ¨Ø¯ÙˆÙ†ÙŠ Ø§Ù„Ù…ÙŠÙƒ Ø§Ø¨ Ù„Ø§ ÙŠØ¯ÙˆÙ‘Ù….. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["ÙÙˆÙ†Ø¯ÙŠØ´Ù†", "Ø¨Ø±Ø§ÙŠÙ…Ø±", "Ù‡Ø§ÙŠÙ„Ø§ÙŠØªØ±"], correct: 1 },

{ q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù„Ù‚Ø¨ Ø¨Ø§Ù„ÙØ§Ø±ÙˆÙ‚ØŸ", options: ["Ø§Ø¨Ùˆ Ø¨ÙƒØ±", "Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø¹Ù„ÙŠ Ø¨Ù† Ø§Ø¨ÙŠ Ø·Ø§Ù„Ø¨"], correct: 1 },

{ q: "Ù…Ø§Ø±ÙƒØ© Ù…Ù„Ø§Ø¨Ø³ Ø´Ø¹Ø§Ø±Ù‡Ø§ ØªÙ…Ø³Ø§Ø­ ØµØºÙŠØ±ØŒ ÙÙ…Ø§ Ù‡ÙŠØŸ", options: ["Ù„ÙˆÙƒØ³Øª", "Ø´Ø§Ù†ÙŠÙ„", "Ø²Ø§Ø±Ø§"], correct: 0 },
            
{ q: "Ø£Ø®ÙÙŠ Ø§Ù„Ø³Ù‡Ø± ÙˆØ£Ù…Ø­Ùˆ Ø§Ù„Ø¹ÙŠÙˆØ¨ ÙˆØ£Ø¬Ø¹Ù„ Ø§Ù„Ù‡Ø§Ù„Ø§Øª Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ ØªØ®ØªÙÙŠ.. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["ÙƒÙˆÙ†Ø³ÙŠÙ„Ø±", "Ø§ÙŠ Ø´Ø§Ø¯Ùˆ", "Ø¨Ù„Ø´Ø±"], correct: 0 },

{ q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø£Ø°Ø§Ù† Ø§Ù„Ø°ÙŠ Ù„Ø§ ØµÙ„Ø§Ø© Ù„Ù‡ØŸ", options: ["Ø§Ø°Ø§Ù† Ø§Ù„Ø¬Ù…Ø¹Ù‡", "Ø§Ø°Ø§Ù† Ø§Ù„Ù…ÙˆÙ„ÙˆØ¯", "Ø§Ø°Ø§Ù† Ø§Ù„Ù…ØºØ±Ø¨"], correct: 1 },

{ q: "Ø£Ù†Ø§ Ø¨Ø·Ù„ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø© Ø£ÙØ·Ø¨Ù‘Ù‚ ÙÙˆÙ‚ Ø¹Ø¸Ù…Ø© Ø§Ù„Ø®Ø¯ ÙˆØ£Ø¬Ø¹Ù„ ÙˆØ¬Ù‡Ùƒ ÙŠØ´Ø¹ Ù†ÙˆØ±Ø§Ù‹.. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["Ø¨Ù„Ø´Ø±", "ÙƒÙˆÙ†ØªÙˆØ±", "Ù‡Ø§ÙŠÙ„Ø§ÙŠØªØ±"], correct: 2 },

{ q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ù‚Ø·Ø·ØŸ", options: ["30", "17", "26"], correct: 2 },

{ q: "Ø³ÙŠØ§Ø±Ø§Øª Ø£Ù„Ù…Ø§Ù†ÙŠØ© Ø´Ù‡ÙŠØ±Ø© Ø´Ø¹Ø§Ø±Ù‡Ø§ Ù†Ø¬Ù…Ø© ÙƒØ¨ÙŠØ±Ø©ØŒ ÙÙ…Ø§ Ù‡ÙŠØŸ", options: ["Ù…Ø±Ø³ÙŠØ¯Ø³ Ø¨Ù†Ø²", "ÙÙŠØ±Ø§Ø±ÙŠ", "Ø¨ÙˆØ±Ø´"], correct: 0 },

{ q: "Ø£Ø«Ø¨Øª Ø§Ù„Ù…ÙŠÙƒ Ø§Ø¨ ÙˆØ£Ù…Ù†Ø¹ Ø§Ù„Ù„Ù…Ø¹Ø§Ù† ÙˆØ£Ø¬Ø¹Ù„ Ø¨Ø´Ø±ØªÙƒ ØªØ¨Ø¯Ùˆ ÙƒØ§Ù„Ù…Ø®Ù…Ù„.. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["ÙÙˆÙ†Ø¯ÙŠØ´Ù†", "ÙƒÙˆÙ†Ø³ÙŠÙ„Ø±", "Ù„ÙˆØ³ Ø¨Ø§ÙˆØ¯Ø±"], correct: 2 },

{ q: "Ù†Ø¨ÙŠ ØµÙ†Ø¹ Ø³ÙÙŠÙ†Ø© ÙƒØ¨ÙŠØ±Ø© Ø¨Ø£Ù…Ø± Ù…Ù† Ø§Ù„Ù„Ù‡ØŸ", options: ["Ù†ÙˆØ­", "ØµØ§Ù„Ø­", "Ø¯Ø§ÙˆØ¯"], correct: 0 },

{ q: "ÙŠØ¨ÙƒÙŠ Ø¨Ù„Ø§ Ø¹ÙŠÙ†ÙŠÙ† ÙˆÙŠÙ…Ø´ÙŠ Ø¨Ù„Ø§ Ø±Ø¬Ù„ÙŠÙ†ØŸ", options: ["Ø§Ù„Ø«Ø¹Ø¨Ø§Ù†", "Ø§Ù„ØºÙŠÙˆÙ…", "Ø§Ù„Ù†Ø¬ÙˆÙ…"], correct: 1 },

{ q: "Ù…Ø§Ù‡ÙŠ Ø£ÙˆÙ„ ØµÙ„Ø§Ø© ØµÙ„ÙŠØª ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¨Ø¹Ø¯ ÙØ±Ø¶Ù‡Ø§ØŸ", options: ["Ø§Ù„Ø¸Ù‡Ø±", "Ø§Ù„Ø¹ØµØ±", "Ø§Ù„ÙØ¬Ø±"], correct: 0 },

{ q: "Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ© Ø£Ù…Ø±ÙŠÙƒÙŠØ© Ø´Ø¹Ø§Ø±Ù‡Ø§ ØªÙØ§Ø­Ø© Ù…Ù‚Ø¶ÙˆÙ…Ø©ØŒ ÙÙ…Ø§ Ù‡ÙŠØŸ", options: ["Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬", "Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØª", "Ø§Ø¨Ù„"], correct: 2 },

{ q: "Ø£Ù…Ø´ÙŠ Ø¨Ù„Ø§ Ù‚Ø¯Ù…ÙŠÙ† ÙˆØ£Ø¨ÙƒÙŠ Ø¨Ù„Ø§ Ø¹ÙŠÙ†ÙŠÙ† ÙˆØ£Ù‚ØªÙ„ Ø¨Ù„Ø§ Ø³ÙƒÙŠÙ†ØŸ", options: ["Ø§Ù„ÙˆÙ‚Øª", "Ø§Ù„Ø±ÙŠØ­", "Ø§Ù„Ø³Ø­Ø§Ø¨"], correct: 0 },

{ q: "Ù…Ø§ Ø¹Ø¯Ø¯ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ø¬Ù†Ø©ØŸ", options: ["8", "9", "10"], correct: 0 },

{ q: "Ø­ÙŠÙˆØ§Ù† Ù„ÙˆÙ† Ø¯Ù…Ù‡ Ø£Ø²Ø±Ù‚ØŸ", options: ["Ø­ØµØ§Ù†", "Ø¯Ø¬Ø§Ø¬Ù‡", "Ø§Ø®Ø·Ø¨ÙˆØ·"], correct: 2 },

{ q: "Ø£Ù†Ø´Ø¯Ùƒ Ø¹Ù† Ø´ÙŠØ¡ ÙŠÙ…Ø´ÙŠ ÙˆÙŠØ¯ÙÙ† Ø¬Ø±ØªÙ‡ØŸ", options: ["Ø§Ù„Ø§Ø¨Ø±Ù‡ Ùˆ Ø§Ù„Ø®ÙŠØ·", "Ø§Ù„Ù…Ù‚Ù„Ù…Ù‡", "Ø§Ù„Ø¬Ø±Ø¨ÙˆØ¹"], correct: 0 },

{ q: "Ù…Ø§Ù‡Ùˆ Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„ÙƒÙ„Ø§Ø¨ØŸ", options: ["7", "10", "20"], correct: 1 },

{ q: "ÙÙŠ Ø£ÙŠ Ù‚Ø§Ø±Ø© ØªÙ‚Ø¹ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", options: ["Ø§Ø³ÙŠØ§", "Ø£ÙØ±ÙŠÙ‚ÙŠØ§", "Ø§Ø³ØªØ±Ø§Ù„ÙŠØ§"], correct: 0 },
            
{ q: "Ù…Ø§Ù‡Ùˆ Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ù‚Ø·Ø· Ø§Ù„ØµØºÙŠØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©ØŸ", options: ["115 Ø¬Ø±Ø§Ù…", "90 Ø¬Ø±Ø§Ù…", "75 Ø¬Ø±Ø§Ù…"], correct: 0 },

{ q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªÙŠ Ù„Ø§ ØªÙƒØ¨ÙŠØ± ÙÙŠÙ‡Ø§ ÙˆÙ„Ø§ Ø±ÙƒÙˆØ¹ ÙˆÙ„Ø§ Ø³Ø¬ÙˆØ¯ØŸ", options: ["ØµÙ„Ø§Ø© Ø§Ù„Ù…ÙŠØª", "Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³ÙˆÙ„", "ØµÙ„Ø§Ø© Ø§Ù„Ø§Ø³ØªØ³Ù‚Ø§Ø¡"], correct: 1 },

{ q: "Ù„ÙŠ Ø´Ø¹Ø± Ù†Ø§Ø¹Ù… Ù„ÙƒÙ†Ù†ÙŠ Ù„Ø³Øª ÙƒØ§Ø¦Ù†Ø§Ù‹ Ø­ÙŠØ§Ù‹ØŸ", options: ["ÙØ±Ø´Ø§Ø© Ø´Ø¹Ø±", "ÙØ±Ø´Ø§Ø© Ù…ÙŠÙƒ Ø§Ø¨", "Ø´Ø¹Ø± Ø­ÙˆÙŠØ¯Ø§"], correct: 1 },

{ q: "Ù…Ù† ÙŠØ£ØªÙŠ Ø¨Ø§Ù„Ø¹Ø³Ù„ØŸ", options: ["Ø§Ù„Ø§Ù†Ø³Ø§Ù†", "Ø§Ù„Ù†Ø­Ù„", "Ø§Ù„Ù…Ø­Ù„ Ø­Ù‚ Ø§Ù„Ø¹Ø³Ù„"], correct: 1 },

{ q: "ØµØ­Ø±Ø§Ø¡ ÙˆØ§Ø³Ø¹Ø© ØªÙ‚Ø¹ ÙÙŠ Ø¬Ù†ÙˆØ¨ Ø´Ø±Ù‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© ÙˆØªØ¹ØªØ¨Ø± Ù…Ù† Ø£ÙƒØ¨Ø± Ø§Ù„ØµØ­Ø§Ø±ÙŠ Ø§Ù„Ø±Ù…Ù„ÙŠØ©ØŸ", options: ["ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ø«Ù…Ø§Ù…Ù‡", "ØµØ­Ø±Ø§Ø¡ Ø±Ø¨Ø¹ Ø§Ù„Ø®Ø§Ù„ÙŠ", "ØµØ­Ø±Ø§Ø¡ Ø·ÙˆÙŠÙ‚"], correct: 1 },

{ q: "Ø£Ø³ÙˆØ¯ ÙƒØ«ÙŠÙ Ø£Ø·ÙˆÙ‘Ù„ ÙˆØ£ÙƒØ«Ù Ø±Ù…ÙˆØ´Ùƒ Ù„ØªØµØ¨Ø­ Ù…Ø«Ù„ Ø¹ÙŠÙˆÙ† Ø§Ù„ØºØ²Ø§Ù„.. ÙÙ…Ù† Ø£Ù†Ø§ØŸ", options: ["ÙƒØ­Ù„", "Ù…Ø§Ø³ÙƒØ§Ø±Ø§", "Ø§ÙŠÙ„Ø§ÙŠÙ†Ø±"], correct: 1 }
        ];

        window.onload = function() {
            if (userName && userID) { startApp(); } 
            else { document.getElementById("setup-overlay").style.display = "flex"; }
        };

        function showNameInput() {
            document.getElementById("rules-step").style.display = "none";
            document.getElementById("name-step").style.display = "block";
        }

        function saveAndStart() {
            const val = document.getElementById("username-input").value.trim();
            if (!val) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
            const newID = "u_" + Date.now() + "_" + Math.random().toString(36).substr(2, 5);
            localStorage.setItem("remy_name_v4", val);
            localStorage.setItem("remy_id_v4", newID);
            userName = val; userID = newID;
            startApp();
        }

        function startApp() {
            document.getElementById("setup-overlay").style.display = "none";
            document.getElementById("display-name").innerText = userName;

     

            db.ref('roundVersion').on('value', snap => {
                const sVer = snap.val() || 0;
                if (localStorage.getItem("remy_v") != sVer) {
                    for(let key in localStorage) { if(key.startsWith("ans_")) localStorage.removeItem(key); }
                    localStorage.setItem("remy_v", sVer);
                }
            });

            db.ref('users/' + userID + '/points').on('value', snap => {
                const p = snap.val() || 0;
                document.getElementById("my-points").innerText = p;
                document.getElementById("wait-points").innerText = p;
            });
            db.ref('users/' + userID + '/name').set(userName);

            db.ref('celebration').on('value', snap => {
                if (snap.exists()) launchConfetti();
            });

            db.ref('currentQuestion').on('value', snap => {
                const idx = snap.val();
                if (idx === -1 || idx === null) {
                    document.getElementById("quiz-container").style.display = "none";
                    document.getElementById("waiting-msg").style.display = "block";
                    clearInterval(timerInterval);
                } else {
                    document.getElementById("waiting-msg").style.display = "none";
                    document.getElementById("quiz-container").style.display = "block";
                    showQuestion(idx);
                }
            });
        }

        function showQuestion(idx) {
            const data = myQuestions[idx];
            if (!data) return;
            document.getElementById("question-text").innerText = data.q;
            const container = document.getElementById("options-container");
            container.innerHTML = ""; 
            document.getElementById("status-msg").innerText = "";
            const answered = localStorage.getItem("ans_" + idx);
            data.options.forEach((opt, i) => {
                const b = document.createElement("button");
                b.className = "opt-btn"; b.innerText = opt;
                if (answered) b.disabled = true;
                b.onclick = () => submitAnswer(i, data.correct, idx);
                container.appendChild(b);
            });
            if (answered) {
                document.getElementById("status-msg").innerText = "ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ âœ‹";
                document.getElementById("timer-progress").style.width = "0%";
            } else {
                startTimer();
            }
        }

        function startTimer() {
            clearInterval(timerInterval);
            let time = 15;
            timerInterval = setInterval(() => {
                time -= 0.1;
                document.getElementById("timer-progress").style.width = (time / 15) * 100 + "%";
                if (time <= 0) { clearInterval(timerInterval); disableAll("Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! â±ï¸"); }
            }, 100);
        }

        function submitAnswer(choice, correct, qIdx) {
            clearInterval(timerInterval);
            localStorage.setItem("ans_" + qIdx, "true");
            disableAll("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...");
            if (choice !== correct) {
                document.getElementById("status-msg").innerText = "Ø®Ø·Ø£ âŒ";
                document.getElementById("status-msg").style.color = "#e94560";
                return;
            }
            db.ref('answers_logs/' + qIdx).push({ name: userName, timestamp: firebase.database.ServerValue.TIMESTAMP });
            db.ref('winners/' + qIdx).transaction(curr => {
                if (curr === null) return { name: userName, id: userID };
                return;
            }, (err, comm) => {
                if (comm) {
                    document.getElementById("status-msg").innerText = "ÙƒÙÙˆ! Ø£Ù†Øª Ø§Ù„Ø£ÙˆÙ„ ğŸ‰";
                    document.getElementById("status-msg").style.color = "#38bdf8";
                    db.ref('users/' + userID + '/points').transaction(p => (p || 0) + 1);
                } else {
                    document.getElementById("status-msg").innerText = "ØµØ­ØŒ Ù„ÙƒÙ† ØºÙŠØ±Ùƒ Ø£Ø³Ø±Ø¹ ğŸ’¨";
                    document.getElementById("status-msg").style.color = "#f59e0b";
                }
            });
        }

        function disableAll(msg) {
            document.querySelectorAll(".opt-btn").forEach(b => b.disabled = true);
            if(msg) document.getElementById("status-msg").innerText = msg;
        }

        function launchConfetti() {
            var duration = 5 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 3000 };
            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random() * (0.3 - 0.1) + 0.1, y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random() * (0.9 - 0.7) + 0.7, y: Math.random() - 0.2 } }));
            }, 250);
        }
    </script>

    <footer class="footer">
        ØªÙ… Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© <a href="https://www.instagram.com/taz7i_/" target="_blank">Ø³Ø§Ù…Ø±</a> ğŸ› ï¸
    </footer>
</body>
</html>











