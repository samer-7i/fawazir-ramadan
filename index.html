<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Remy ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg: #0a1120; --card: #162136; --blue: #38bdf8; --red: #e94560; --accent: #10b981; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 15px; overflow: hidden; }
        .container { width: 100%; max-width: 450px; background: var(--card); padding: 25px; border-radius: 20px; text-align: center; border: 1px solid rgba(56, 189, 248, 0.2); position: relative; }
        .logo { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--blue); margin-bottom: 10px; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 10px; border: 2px solid var(--blue); background: rgba(0,0,0,0.3); color: #fff; text-align: center; font-size: 1.1em; outline: none; }
        #question-area { display: none; }
        .timer-msg { font-size: 1.2em; color: #ff9800; font-weight: bold; margin: 10px 0; }
        .ans-timer { font-size: 2em; color: var(--red); font-weight: bold; margin: 10px 0; }
        .opt-btn { width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: 1px solid rgba(56,189,248,0.3); background: rgba(255,255,255,0.05); color: #fff; cursor: pointer; font-size: 1.1em; font-weight: bold; transition: 0.2s; }
        .correct { background: var(--accent) !important; box-shadow: 0 0 15px var(--accent); }
        .wrong { background: var(--red) !important; opacity: 0.7; }
        .disabled { pointer-events: none; opacity: 0.6; }
    </style>
</head>
<body>

<div class="container">
    <img src="logo.png" class="logo" onerror="this.src='https://api.dicebear.com/7.x/bottts/svg?seed=Remy'">
    <h2 id="status">Ø§Ù†ØªØ¸Ø±... â³</h2>

    <div id="login-area">
        <input type="text" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ..." maxlength="25">
        <p style="color: var(--blue); font-size: 0.8em;">Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</p>
    </div>

    <div id="question-area">
        <div id="countdown-msg" class="timer-msg"></div>
        <div id="answer-timer" class="ans-timer"></div>
        <h3 id="q-text" style="color: var(--blue); margin-bottom: 20px;"></h3>
        <div id="options-container"></div>
    </div>
</div>

<script>
    const config = { 
        apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
        authDomain: "fawazir-jaco.firebaseapp.com",
        databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "fawazir-jaco",
        storageBucket: "fawazir-jaco.firebasestorage.app",
        messagingSenderId: "862747657100",
        appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
    };
    firebase.initializeApp(config);
    const db = firebase.database();

    const myQuestions = [
        { q: "Ù¡/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ø°ÙŠ ØªÙ…Ø³ÙƒÙ‡ Ø¯ÙˆÙ† Ø§Ù† ØªÙ„Ù…Ø³Ù‡ØŸ", options: ["Ø§Ù„ÙˆØ¹Ø¯", "Ø§Ù„Ù†ÙØ³", "Ø§Ù„Ø¬Ù†ÙŠ"], correct: 0 },
        { q: "Ù¢/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙØ³ØªØ®Ø¯Ù… Ù„ØªÙˆØ­ÙŠØ¯ Ù„ÙˆÙ† Ø§Ù„Ø¨Ø´Ø±Ø© ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹ÙŠÙˆØ¨ØŸ", options: ["Ø§Ù„ÙØ§ÙˆÙ†Ø¯ÙŠØ´Ù†", "Ø§Ù„Ù‡Ø§ÙŠÙ„Ø§ÙŠØªØ±", "Ø§Ù„ØªÙˆÙ†Ø±"], correct: 0 },
        { q: "Ù£/Ø³ÙŠØ§Ø±Ø© \"ØªÙŠØ³Ù„Ø§\" (Tesla) Ù…Ø´Ù‡ÙˆØ±Ø© Ø¨Ø£Ù†Ù‡Ø§ ØªØ¹Ù…Ù„ Ø¨Ù€Ù…Ø§Ø°Ø§ØŸ", options: ["Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†", "Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø§Ù„ÙØ­Ù…"], correct: 1 },
        { q: "Ù¤/Ø®Ù…Ù† Ø§Ù„Ù…Ø«Ù„ Ù…Ù† Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ: ğŸ«²ğŸ”¥ğŸ«²ğŸ’§ØŸ", options: ["Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ ÙÙŠ Ø§Ù„Ù†Ø§Ø± Ù…Ùˆ Ù…Ø«Ù„ Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ ÙÙŠ Ø§Ù„Ù…ÙˆÙŠØ§", "Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ Ù…Ø­ØªØ±Ù‚Ù‡ Ù…Ùˆ Ù…Ø«Ù„ Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ Ù…Ø«Ù„Ø¬Ù‡", "Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ Ù…Ù„ØªÙ‡Ø¨Ù‡ Ù…Ùˆ Ù…Ø«Ù„ Ø§Ù„Ù„ÙŠ ÙŠØ¯Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø±Ø§Ø¯"], correct: 0 },
        { q: "Ù¥/Ø®Ù…Ù† Ø§Ù„Ø§ÙƒÙ„Ù‡ Ù…Ù† Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ: ğŸˆğŸ˜˜ØŸ", options: ["Ø¨Ø³Ø¨ÙˆØ³Ù‡", "Ø¨Ø³Ù‡ ØªØ­Ø¨ Ø§Ù„Ø¨Ø³Ø¨ÙˆØ³Ù‡", "Ø§Ù„Ø§Ù†Ø³Ø§Ù† ÙŠØ­Ø¨ ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨Ø³Ù‡"], correct: 0 },
        { q: "Ù¦/Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø§ØªØ­Ø§Ø¯ØŒ Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø´Ø¹Ø§Ø±Ù‡ ÙˆÙŠÙ„Ù‚Ø¨ Ø¨Ù‡ØŸ", options: ["Ø§Ù„ØµÙ‚Ø±", "Ø§Ù„Ù†Ù…Ø±", "Ø§Ù„Ø°Ø¦Ø¨"], correct: 1 },
        { q: "Ù§/Ø£ÙŠÙ† ÙŠÙ‚Ø¹ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠÙ‡ Ù‚Ø·Ø±Ø© Ù…Ø§Ø¡ØŸ", options: ["ÙÙŠ Ø§Ù„ÙØ¶Ø§Ø¡", "Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©", "ÙÙŠ Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø§Ù„ÙƒØ¨Ø±Ù‰"], correct: 1 },
        { q: "Ù¨/Ù…Ø§Ø°Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ù„ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙÙŠ Ø§Ù„ÙƒØ­Ù„ØŸ", options: ["Ø£Ø¹ÙˆØ§Ø¯ Ø§Ù„Ù‚Ø·Ù† Ù…Ø¹ Ù…Ø²ÙŠÙ„ Ù…ÙƒÙŠØ§Ø¬", "Ø§Ù„Ù…Ù…Ø­Ø§Ø©", "Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„ØµØ§Ø¨ÙˆÙ† Ù…Ø¨Ø§Ø´Ø±Ø©"], correct: 0 },
        { q: "Ù©/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ…ØªÙ„Ùƒ Ø±Ø¦Ø© ÙˆÙ„Ø§ ÙŠØªÙ†ÙØ³ØŸ", options: ["Ø§Ù„Ø§Ø³ÙÙ†Ø¬Ù‡", "Ø§Ù„Ø³ÙŠØ§Ø±Ù‡", "Ø§Ù„Ù…Ù†ÙØ§Ø®"], correct: 2 },
        { q: "Ù¡Ù /Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ…ØªÙ„Ùƒ Ø¹Ø±ÙˆÙ‚Ø§Ù‹ ÙˆÙ„Ø§ ÙŠØ¬Ø±ÙŠ ÙÙŠÙ‡Ø§ Ø¯Ù…ØŸ", options: ["ÙˆØ±Ù‚Ø© Ø§Ù„Ø´Ø¬Ø±", "Ø§Ù„Ø±Ø®Ø§Ù…", "Ø§Ù„Ø®Ø±ÙŠØ·Ø©"], correct: 0 },
        { q: "Ù¡Ù¡/Ø§ÙŠ ØµÙ„Ø§Ù‡ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠÙ‡Ø§ Ù„Ø§ Ø±ÙƒÙˆØ¹ Ùˆ Ù„Ø§ Ø³Ø¬ÙˆØ¯ØŸ", options: ["ØµÙ„Ø§Ø© Ø§Ù„Ø§Ø³ØªØ³Ù‚Ø§Ø¡", "ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù†Ø§Ø²Ø©", "ØµÙ„Ø§Ø© Ø§Ù„ÙƒØ³ÙˆÙ"], correct: 1 },
        { q: "Ù¡Ù¢/Ø´ÙŠ ÙŠÙ…ØªÙ„Ùƒ Ø±ÙŠØ´Ø§Ù‹ Ùˆ Ù„Ø§ ÙŠØ·ÙŠØ±ØŸ", options: ["Ø§Ù„Ù…Ø®Ø¯Ù‡", "Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø©", "Ø§Ù„Ø³Ù‡Ù…"], correct: 0 },
        { q: "Ù¡Ù£/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø§Ù„Ù†Ø¨ÙŠ ï·º ÙŠØ­Ø¨ Ù„Ø¨Ø³Ù‡ ÙƒØ«ÙŠØ±Ø§Ù‹ØŸ", options: ["Ø§Ù„Ø§Ø­Ù…Ø±", "Ø§Ù„Ø§Ø¨ÙŠØ¶", "Ø§Ù„Ø§Ø®Ø¶Ø±"], correct: 1 },
        { q: "Ù¡Ù¤/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ…ØªÙ„Ùƒ Ø§Ø¨Ù‡Ø§Ù…Ø§Ù‹ Ùˆ Ù¤ Ø§ØµØ§Ø¨Ø¹ ÙˆÙ„ÙƒÙ†Ù‡ Ù„ÙŠØ³ Ø­ÙŠØ§Ù‹ØŸ", options: ["Ø§Ù„Ù‚ÙØ§Ø²", "Ø§Ù„ØªÙ…Ø«Ø§Ù„", "ÙŠØ¯ Ø§Ù„Ø¨Ø´Ø±"], correct: 0 },
        { q: "Ù¡Ù¥/Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ SPF ÙÙŠ ÙˆØ§Ù‚ÙŠ Ø§Ù„Ø´Ù…Ø³ØŸ", options: ["Ø¹Ø§Ù…Ù„ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø´Ù…Ø³", "Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬", "Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©"], correct: 0 },
        { q: "Ù¡Ù¦/Ù…Ø§ Ù‡Ùˆ ÙØ¶Ù„ Ù‚Ø±Ø§Ø¡Ø© Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©ØŸ", options: ["ØªØ²ÙŠØ¯ Ø§Ù„Ø±Ø²Ù‚", "ØªØ¶ÙŠØ¡ Ù„Ù„Ù…Ø³Ù„Ù… Ù†ÙˆØ±Ø§Ù‹ Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù…Ø¹ØªÙŠÙ†", "ØªØ­Ù…ÙŠ Ù…Ù† Ø§Ù„Ù…Ø±Ø¶"], correct: 1 },
        { q: "Ù¡Ù§/Ø®Ù…Ù† Ø§Ù„Ø§Ø³Ù… Ù…Ù† Ø§Ù„Ø§ÙŠÙ…ÙˆØ¬ÙŠ: Ø§Ø³ ğŸ’§", options: ["Ø§Ø³Ù…Ø§Ø¡", "Ø§Ø³Ù‚Ø·Ø±Ø©", "Ù…Ø§Ø³Ù‡"], correct: 0 },
        { q: "Ù¡Ù¨/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ø°ÙŠ ØªØ±Ø§Ù‡ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ Ù£Ù…Ø±Ø§Øª ØŸ", options: ["Ø§Ù„Ù†Ø¬ÙˆÙ…", "Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…", "Ø§Ù„Ù‚Ù…Ø±"], correct: 1 },
        { q: "Ù¡Ù©/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø·ÙŠØ± Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ø·ÙŠØ± Ø§Ù„Ù‰ Ø§Ù„Ø®Ù„Ù ØŸ", options: ["Ø§Ù„Ø®ÙØ§Ø´", "Ø§Ù„Ø·Ù†Ø§Ù†", "Ø§Ù„Ø¨ÙˆÙ…Ø©"], correct: 1 },
        { q: "Ù¢Ù /Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ 3 ØªÙØ§Ø­Ø§Øª ÙˆØ£Ø®Ø°Øª Ù…Ù†Ù‡Ù… ØªÙØ§Ø­ØªÙŠÙ†ØŒ ÙÙƒÙ… ØªÙØ§Ø­Ø© Ù…Ø¹ÙƒØŸ", options: ["ØªÙØ§Ø­ØªÙŠÙ† Ø§Ù„Ù„ÙŠ Ù…Ø¹Ø§ÙŠ", "ØªÙØ§Ø­Ù‡", "Ù£ ØªÙØ§Ø­Ø§Øª"], correct: 0 },
        { q: "Ù¢Ù¡/Ù…Ù† Ø§ÙˆÙ„ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨ÙˆØµÙ„Ù‡ØŸ", options: ["Ø§Ù„ØµÙŠÙ†", "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠÙ‡", "Ø§Ù„ÙƒÙˆÙŠØª"], correct: 0 },
        { q: "Ù¢Ù¢/Ø®Ù…Ù† Ø§Ù„Ù…Ø«Ù„: ğŸ± + ğŸ­ + ğŸ  = ØŸ", options: ["Ø§Ù† ØºØ§Ø¨ Ø§Ù„Ù‚Ø· Ø§Ù„Ø¹Ø¨ ÙŠØ§ ÙØ§Ø±", "Ø§Ù† ØºØ§Ø¨ Ø§Ù„Ù‚Ø· Ø§Ù„Ø¹Ø¨ ÙŠØ§ ÙƒÙ„Ø¨", "Ø§Ù† ØºØ§Ø¨ Ø§Ù„ÙØ§Ø± Ø§Ù„Ø¹Ø¨ ÙŠØ§ Ù‚Ø·"], correct: 0 },
        { q: "Ù¢Ù£/Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ£ÙƒÙ„ ÙˆÙ„Ø§ ÙŠØ´Ø±Ø¨ØŒ ÙˆÙ…Ø¹ Ø°Ù„Ùƒ Ø°ÙƒØ± ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø£Ù†Ù‡ \"ÙŠØªÙ†ÙØ³\"ØŸ", options: ["Ø§Ù„Ø¬Ù†ÙŠÙ†", "Ø§Ù„ØµØ¨Ø­", "Ø§Ù„Ø¬Ø¨Ø§Ù„"], correct: 1 },
        { q: "Ù¢Ù¤/Ø³ÙŠØ§Ø±Ø© Ø±ÙŠØ§Ø¶ÙŠØ© Ø´Ø¹Ø§Ø±Ù‡Ø§ \"Ø§Ù„Ø«ÙˆØ± Ø§Ù„Ù‡Ø§Ø¦Ø¬\"ØŸ", options: ["Ù…ÙˆØ³ØªÙ†Ø¬", "Ù„Ø§Ù…Ø¨ÙˆØ±Ø¬ÙŠÙ†ÙŠ", "ÙÙŠØ±Ø§Ø±ÙŠ"], correct: 1 },
        { q: "Ù¢Ù¥/Ù…Ø§ Ù‡ÙŠ Ø§Ø®Ø± Ø³ÙˆØ±Ø© Ù†Ø²Ù„Øª Ø¨Ø§Ù„Ù‚Ø±Ø£Ù† ØŸ", options: ["Ø§Ù„Ù†ØµØ±", "Ø§Ù„ÙÙ„Ù‚", "Ø§Ù„Ø§Ø®Ù„Ø§Øµ"], correct: 0 },
        { q: "Ù¢Ù¦/Ø´ÙŠØ¡ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø´Ù†Ø·Ø© ÙˆØ¸ÙŠÙØªÙ‡ ÙŠØ±ÙØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¹Ø´Ø§Ù† ØªØºÙŠØ± Ø§Ù„ÙƒÙØ±ØŸ", options: ["Ø§Ù„Ù…ÙØªØ§Ø­", "Ø§Ù„Ø¹ÙØ±ÙŠØªØ©", "Ø§Ù„Ù‚Ù…Ø¹"], correct: 1 },
        { q: "Ù¢Ù§/ÙƒÙ… Ø¹Ø¯Ø¯ ÙÙ‚Ø±Ø§Øª Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠØŸ", options: ["33", "34", "40"], correct: 0 },
        { q: "Ù¢Ù¨/Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù†Øª Ù…Ø¹Ø¬Ø²ØªÙ‡ \"Ø§Ù„Ù†Ø§Ù‚Ø©\" Ø§Ù„ØªÙŠ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„ØµØ®Ø±ØŸ", options: ["Ø³ÙŠØ¯Ù†Ø§ Ù‡ÙˆØ¯ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø³ÙŠØ¯Ù†Ø§ ØµØ§Ù„Ø­ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø³ÙŠØ¯Ù†Ø§ Ø´Ø¹ÙŠØ¨ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…"], correct: 1 },
        { q: "Ù¢Ù©/Ø³ÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø°ÙÙƒØ± ÙÙŠÙ‡Ø§ \"Ø§Ù„Ø°Ø¨Ø§Ø¨\" Ùˆ \"Ø§Ù„Ø¨Ø¹ÙˆØ¶\"ØŸ", options: ["Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø­Ù„", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙŠÙ„"], correct: 1 },
        { q: "Ù£Ù /Ø£Ù†Ø´Ø¯Ùƒ Ø¹Ù† Ø±Ø¬Ù„Ù Ø³Ø±ÙŠØ¹ Ø§Ù„Ø®Ø·Ø§ÙˆÙŠ.. ÙŠÙ…Ø´ÙŠ Ø¹Ù„Ù‰ ÙƒØ¨Ø¯Ù‡ ÙˆÙ„Ø§ Ù„Ù‡ Ø±Ø¬Ù„ÙŠÙ†ØŸ", options: ["Ø§Ù„Ù‚Ø·Ø§Ø±", "Ø§Ù„Ø³ÙŠÙˆÙ„", "Ø§Ù„Ø±Ø¹Ø¯"], correct: 0 }
    ];

    let currentQIdx = -1;
    let timerInterval;

    // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³Ù…
    if(localStorage.getItem('p_name')) document.getElementById('username').value = localStorage.getItem('p_name');

    db.ref('currentQuestion').on('value', snap => {
        const val = snap.val();
        if (val === null || val === -1) {
            resetUI();
            return;
        }
        currentQIdx = val;
        setupQuestion(val);
    });

    function resetUI() {
        document.getElementById('question-area').style.display = "none";
        document.getElementById('login-area').style.display = "block";
        document.getElementById('status').innerText = "Ø§Ù†ØªØ¸Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„... â³";
        clearInterval(timerInterval);
    }

    function setupQuestion(idx) {
        document.getElementById('login-area').style.display = "none";
        document.getElementById('question-area').style.display = "block";
        document.getElementById('status').innerText = "Ø±ÙƒØ² ÙÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„! ğŸ§";
        document.getElementById('q-text').innerText = myQuestions[idx].q;
        document.getElementById('options-container').innerHTML = "";
        document.getElementById('answer-timer').innerText = "";
        
        // Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª (3 Ø«ÙˆØ§Ù†ÙŠ)
        let cd = 3;
        const msg = document.getElementById('countdown-msg');
        msg.innerText = `ØªØ¸Ù‡Ø± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¹Ø¯ ${cd}`;
        
        const intro = setInterval(() => {
            cd--;
            msg.innerText = `ØªØ¸Ù‡Ø± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¹Ø¯ ${cd}`;
            if(cd <= 0) {
                clearInterval(intro);
                msg.innerText = "Ø£Ø¬Ø¨ Ø§Ù„Ø¢Ù†!";
                startAnswering(idx);
            }
        }, 1000);
    }

    function startAnswering(idx) {
        const container = document.getElementById('options-container');
        myQuestions[idx].options.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = "opt-btn";
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(i, btn);
            container.appendChild(btn);
        });

        // Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„ (15 Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©)
        let timeLimit = 15;
        const timerDisp = document.getElementById('answer-timer');
        timerDisp.innerText = timeLimit;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLimit--;
            timerDisp.innerText = timeLimit;
            if(timeLimit <= 0) {
                clearInterval(timerInterval);
                timerDisp.innerText = "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! â°";
                document.querySelectorAll('.opt-btn').forEach(b => b.classList.add('disabled'));
            }
        }, 1000);
    }

    function handleAnswer(choice, btn) {
        const name = document.getElementById('username').value.trim();
        if(!name) { alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!"); return; }
        localStorage.setItem('p_name', name);

        clearInterval(timerInterval); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        document.querySelectorAll('.opt-btn').forEach(b => b.classList.add('disabled'));

        if(choice === myQuestions[currentQIdx].correct) {
            btn.classList.add('correct');
            db.ref('answers_logs/' + currentQIdx).push({
                name: name,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            });
            document.getElementById('status').innerText = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ âœ…";
        } else {
            btn.classList.add('wrong');
            document.getElementById('status').innerText = "Ù„Ù„Ø£Ø³Ù Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! âŒ";
        }
    }
</script>
</body>
</html>
