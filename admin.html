<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy ğŸš€</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f0f2f5; padding: 20px; }
        .admin-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-width: 800px; margin: 20px auto; }
        button { padding: 15px; cursor: pointer; border: none; border-radius: 8px; font-weight: bold; }
        .q-btn { background: #38bdf8; color: white; }
        .stop-btn { background: #e94560; color: white; width: 100%; max-width: 800px; font-size: 1.2em; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ§Ø± Ù„Ù„Ø§Ø¯Ù…Ù† */
        #current-view {
            background: #fff; padding: 20px; border-radius: 15px;
            max-width: 800px; margin: 20px auto; border: 2px solid #38bdf8;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .live-label { color: #e94560; font-weight: bold; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <h1>Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù…Ø³Ø§Ø¨Ù‚Ø© Remy ğŸ®</h1>

    <div id="current-view">
        <p class="live-label">ğŸ”´ ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¢Ù† Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†:</p>
        <h2 id="view-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¤Ø§Ù„ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
        <div id="view-options" style="display: flex; justify-content: center; gap: 10px;"></div>
    </div>

    <div class="admin-grid" id="btns-holder"></div>
    <button class="stop-btn" onclick="sendQ(-1)">Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹ ğŸ›‘</button>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script> <script>
        const holder = document.getElementById("btns-holder");
        
        // 1. ØªÙˆÙ„ÙŠØ¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
        window.allQuestions.forEach((q, i) => {
            const btn = document.createElement("button");
            btn.className = "q-btn";
            btn.innerText = "Ø³Ø¤Ø§Ù„ " + (i + 1);
            btn.onclick = () => sendQ(i);
            holder.appendChild(btn);
        });

        function sendQ(idx) {
            db.ref('currentQuestion').set(idx);
        }

        // 2. Ø§Ù„Ù…ÙŠØ²Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ§Ø± Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙˆØ±Ø§Ù‹
        db.ref('currentQuestion').on('value', (snap) => {
            const idx = snap.val();
            const viewText = document.getElementById("view-text");
            const viewOpts = document.getElementById("view-options");

            if (idx === -1 || idx === null) {
                viewText.innerText = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¤Ø§Ù„ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹";
                viewOpts.innerHTML = "";
            } else {
                const qData = window.allQuestions[idx];
                viewText.innerText = "Ø³ " + (idx + 1) + ": " + qData.q;
                viewOpts.innerHTML = "";
                qData.options.forEach((opt, i) => {
                    const span = document.createElement("span");
                    span.style.cssText = "padding: 5px 15px; background: #eee; border-radius: 5px;";
                    // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± Ù„Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·
                    if(i === qData.correct) span.style.background = "#d1fae5"; 
                    span.innerText = opt;
                    viewOpts.appendChild(span);
                });
            }
        });
    </script>
</body>
</html>
