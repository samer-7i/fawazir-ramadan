<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Remy</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="script.js"></script> 
    <style>
        body { font-family: sans-serif; text-align: center; background: #f0f2f5; margin: 0; padding: 20px; }
        
        /* Ø´Ø§Ø´Ø© Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ§Ø± (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¬ÙˆØ§Ø¨ Ø§Ù„ØµØ­ÙŠØ­) */
        .preview-box {
            background: white;
            max-width: 600px;
            margin: 0 auto 20px;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-right: 5px solid #007bff;
            display: none; /* ØªØ®ØªÙÙŠ Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„ */
        }

        .btn-grid { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 10px; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
        }

        button { padding: 15px; cursor: pointer; border: none; border-radius: 5px; background: #007bff; color: white; font-weight: bold; }
        button:hover { background: #0056b3; }

        .stop-btn { background: #dc3545; margin-top: 20px; padding: 20px; width: 80%; max-width: 800px; font-size: 1.1em; }
        .stop-btn:hover { background: #a71d2a; }

        .opt-view {
            display: inline-block;
            margin: 5px;
            padding: 5px 12px;
            background: #e9ecef;
            border-radius: 4px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>

    <h2>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ğŸš€</h2>

    <div id="preview" class="preview-box">
        <p style="color: #666; font-size: 0.9em; margin: 0;">ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¢Ù† Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†:</p>
        <h3 id="current-q-title" style="margin: 10px 0;"></h3>
        <div id="current-q-opts"></div>
    </div>

    <div class="btn-grid" id="buttons"></div>
    
    <button class="stop-btn" onclick="setQuestion(-1)">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© / Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„ ğŸ›‘</button>

    <script>
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù…Ù„Ù script.js ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        const btnContainer = document.getElementById("buttons");
        const previewBox = document.getElementById("preview");
        const qTitle = document.getElementById("current-q-title");
        const qOpts = document.getElementById("current-q-opts");

        // ØªÙˆÙ„ÙŠØ¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø³ÙŠØ£Ø®Ø° Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ù† Ù…ØµÙÙˆÙØ© allQuestions ÙÙŠ script.js)
        const totalQs = window.allQuestions ? window.allQuestions.length : 50;
        
        for (let i = 0; i < totalQs; i++) {
            let btn = document.createElement("button");
            btn.innerText = "Ø³Ø¤Ø§Ù„ " + (i + 1);
            btn.onclick = () => setQuestion(i);
            btnContainer.appendChild(btn);
        }

        function setQuestion(idx) {
            db.ref('currentQuestion').set(idx);
            // Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ alert Ù‡Ù†Ø§ Ù„Ø£Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³ØªØ¸Ù‡Ø± Ø£Ù…Ø§Ù…Ùƒ
        }

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯Ùƒ ÙƒØ£Ø¯Ù…Ù†
        db.ref('currentQuestion').on('value', (snapshot) => {
            const idx = snapshot.val();
            if (idx === -1 || idx === null) {
                previewBox.style.display = "none";
            } else {
                previewBox.style.display = "block";
                const data = window.allQuestions[idx];
                qTitle.innerText = "Ø³" + (idx + 1) + ": " + data.q;
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¯ÙˆÙ† ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµØ­ÙŠØ­
                qOpts.innerHTML = "";
                data.options.forEach(opt => {
                    const span = document.createElement("span");
                    span.className = "opt-view";
                    span.innerText = opt;
                    qOpts.appendChild(span);
                });
            }
        });
    </script>
</body>
</html>
