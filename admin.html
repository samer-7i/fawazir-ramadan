<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy ğŸ®</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
    /* ... Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ... */

    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
    .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr; /* ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù†ØµÙÙŠÙ† Ù…ØªØ³Ø§ÙˆÙŠÙŠÙ† */
        gap: 20px;
        width: 95%;
        max-width: 1000px;
        margin-top: 20px;
    }

    .box {
        background-color: var(--card-bg);
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        border: 1px solid rgba(255,255,255,0.05);
        min-height: 300px; /* Ù„Ø¶Ù…Ø§Ù† ØªÙ†Ø§Ø³Ù‚ Ø§Ù„Ø·ÙˆÙ„ */
    }

    /* ØªØ­Ø³ÙŠÙ† Ø´ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ */
    .list-container {
        text-align: right;
        margin-top: 15px;
        max-height: 400px;
        overflow-y: auto; /* Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ±ÙˆÙ„ Ø¥Ø°Ø§ Ø²Ø§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† */
    }

    .rank-row {
        padding: 10px;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.95em;
    }

    .rank-row:last-child { border-bottom: none; }

    .name-tag { color: var(--text-main); }
    .score-tag { color: var(--primary); font-weight: bold; font-family: monospace; }
    .gold-rank { color: #fbbf24; font-weight: bold; }

    /* Ù„Ù„Ø¬ÙˆØ§Ù„: Ø§Ø¬Ø¹Ù„Ù‡Ù… ÙÙˆÙ‚ Ø¨Ø¹Ø¶ */
    @media (max-width: 768px) {
        .dashboard-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="box" style="width: 95%; max-width: 1000px;">
    <h3>ğŸ¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³Ø¤Ø§Ù„:</h3>
    <div id="admin-buttons"></div>
    <button class="stop-btn" onclick="stopQuiz()">ğŸ›‘ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
</div>

<div class="dashboard-grid">
    <div class="box">
        <h3 style="color: #fbbf24;">â±ï¸ Ø£Ø³Ø±Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª (Ù„Ù„Ø³Ø¤Ø§Ù„)</h3>
        <div id="fastest-list" class="list-container">Ø§Ø¶ØºØ· Ø³Ø¤Ø§Ù„Ø§Ù‹...</div>
    </div>

    <div class="box">
        <h3 style="color: var(--primary);">ğŸŒŸ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø§Ù… (Ø§Ù„Ù†Ù‚Ø§Ø·)</h3>
        <div id="leaderboard" class="list-container">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>
</div>
    <script>
        // Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ù€ Firebase Ø§Ù„Ù…Ø¹ØªØ§Ø¯
        const firebaseConfig = {
            apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
            authDomain: "fawazir-jaco.firebaseapp.com",
            databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fawazir-jaco",
            storageBucket: "fawazir-jaco.firebasestorage.app",
            messagingSenderId: "862747657100",
            appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù€ 50 Ø²Ø±
        const btnContainer = document.getElementById("admin-buttons");
        for (let i = 0; i < 50; i++) {
            let btn = document.createElement("button");
            btn.innerText = "Ø³Ø¤Ø§Ù„ " + (i + 1);
            btn.className = "q-btn";
            btn.onclick = () => {
                document.querySelectorAll('.q-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                sendQuestion(i);
            };
            btnContainer.appendChild(btn);
        }

        function sendQuestion(idx) {
            db.ref('currentQuestion').set(idx);
            db.ref('winners/' + idx).on('value', showFastest);
        }

        function stopQuiz() {
            db.ref('currentQuestion').set(-1);
            document.querySelectorAll('.q-btn').forEach(b => b.classList.remove('active'));
            alert("ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©");
        }

        function showFastest(snap) {
            const list = document.getElementById("fastest-list");
            list.innerHTML = "";
            let data = [];
            snap.forEach(c => { if(c.val().correct) data.push(c.val()); });
            data.forEach((w, i) => {
                list.innerHTML += `<div class="rank-row"><span>${w.name}</span><span class="gold">#${i+1}</span></div>`;
            });
        }

        db.ref('totalPoints').on('value', (snap) => {
            const board = document.getElementById("leaderboard");
            board.innerHTML = "";
            let users = [];
            snap.forEach(c => { users.push({name: c.key.replace(/_/g, ' '), pts: c.val()}); });
            users.sort((a,b) => b.pts - a.pts);
            users.forEach((u, i) => {
                board.innerHTML += `<div class="rank-row"><span>${u.name}</span><span class="gold">${u.pts} Ù†Ù‚Ø·Ø©</span></div>`;
            });
        });
    </script>
</body>
</html>
