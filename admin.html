<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy ğŸ®</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #1a1a2e; color: white; text-align: center; font-family: sans-serif; padding: 20px; }
        .btn { padding: 12px; background: #e94560; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px; }
        #winners-list { background: #16213e; margin-top: 30px; padding: 20px; border-radius: 10px; border: 1px solid #0f3460; text-align: right; max-width: 500px; margin-left: auto; margin-right: auto; }
        .winner-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #444; }
        .winner-item:first-child { color: #ffd700; font-weight: bold; border-left: 5px solid #ffd700; padding-left: 10px; } /* Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø£ÙˆÙ„ */
    </style>
</head>
<body>

    <h1>ğŸ® Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy</h1>
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ÙˆØ¹Ø±Ø¶ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†</p>
    
    <div id="admin-buttons">
        </div>

    <button onclick="sendQ(-1)" class="btn" style="background:red; margin-top:20px;">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© â³</button>

    <div id="winners-list">
        <h3>ğŸ† Ø£Ø³Ø±Ø¹ 10 Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©:</h3>
        <div id="list-content">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† Ù‡Ù†Ø§...</div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ù† ÙˆØ§Ù‚Ø¹ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙ‚Ø©
        const firebaseConfig = {
            apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
            authDomain: "fawazir-jaco.firebaseapp.com",
            databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fawazir-jaco",
            storageBucket: "fawazir-jaco.firebasestorage.app",
            messagingSenderId: "862747657100",
            appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Ø¥Ù†Ø´Ø§Ø¡ 50 Ø²Ø± Ù„Ù„ØªØ­ÙƒÙ…
        const container = document.getElementById("admin-buttons");
        for(let i=0; i<50; i++) {
            let btn = document.createElement("button");
            btn.className = "btn";
            btn.innerText = "Ø³Ø¤Ø§Ù„ " + (i+1);
            btn.onclick = () => sendQ(i);
            container.appendChild(btn);
        }

        function sendQ(index) {
            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†
            database.ref('currentQuestion').set(index);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø³Ø¤Ø§Ù„Ø§Ù‹ Ø­Ù‚ÙŠÙ‚ÙŠØ§Ù‹ ÙˆÙ„ÙŠØ³ Ø¥ÙŠÙ‚Ø§ÙØ§Ù‹ØŒ Ø§Ø¹Ø±Ø¶ ÙØ§Ø¦Ø²ÙŠÙ‡
            if (index !== -1) {
                showTopWinners(index);
            } else {
                document.getElementById("list-content").innerHTML = "Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…ØªÙˆÙ‚ÙØ© Ø§Ù„Ø¢Ù†.";
            }
        }

        function showTopWinners(qIndex) {
            const listContent = document.getElementById("list-content");
            listContent.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø±Ø¹...";

            // Ø³Ø­Ø¨ Ø£ÙˆÙ„ 10 Ù…Ø±ØªØ¨ÙŠÙ† Ø²Ù…Ù†ÙŠØ§Ù‹ (Ø§Ù„Ø£Ù‚Ø¯Ù… Ù‡Ùˆ Ø§Ù„Ø£Ø³Ø±Ø¹)
            database.ref('winners/' + qIndex).orderByChild('time').limitToFirst(10).on('value', (snapshot) => {
                listContent.innerHTML = "";
                
                if (!snapshot.exists()) {
                    listContent.innerHTML = "Ù„Ù… ÙŠØ¬Ø§ÙˆØ¨ Ø£Ø­Ø¯ ØµØ­ Ø¨Ø¹Ø¯.";
                    return;
                }

                let rank = 1;
                snapshot.forEach((child) => {
                    const data = child.val();
                    const div = document.createElement("div");
                    div.className = "winner-item";
                    div.innerHTML = `<span>#${rank} - ${data.name}</span> <span>âœ…</span>`;
                    listContent.appendChild(div);
                    rank++;
                });
            });
        }
    </script>
</body>
</html>
