<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© ğŸ‘‘</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg: #0a1120; --card: #162136; --blue: #38bdf8; --red: #e94560; --text: #ffffff; --accent: #10b981; --gold: #f59e0b; }
        body { margin: 0; padding: 20px; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; }
        
        .main-layout { display: grid; grid-template-columns: 1fr 350px; gap: 20px; width: 100%; max-width: 1150px; }
        .panel { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid rgba(56, 189, 248, 0.2); margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .admin-logo { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--blue); margin-bottom: 10px; }
        
        .q-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; margin: 15px 0; }
        .q-btn { background: rgba(255, 255, 255, 0.05); color: var(--blue); border: 1px solid rgba(56, 189, 248, 0.3); padding: 12px 5px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em; transition: 0.3s; }
        .q-btn.active { background: var(--blue); color: #000; box-shadow: 0 0 15px var(--blue); }
        
        .section-title { border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 8px; margin-bottom: 15px; color: var(--blue); font-size: 1.1em; font-weight: bold; }
        
        #question-text-area { margin: 15px 0; font-size: 1.3em; color: #fff; font-weight: bold; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; border-right: 4px solid var(--blue); min-height: 50px; display: flex; align-items: center; justify-content: center; text-align: center; }

        .list-container { max-height: 400px; overflow-y: auto; text-align: right; }
        .name-item { display: flex; justify-content: space-between; padding: 10px 12px; margin-bottom: 6px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 0.95em; border-right: 3px solid transparent; }
        .fast-track { border-right-color: var(--accent); }
        .leader-track { border-right-color: var(--gold); }

        .prize-input { background: #0a1120; border: 1px solid var(--blue); color: white; padding: 8px; border-radius: 8px; width: 100%; box-sizing: border-box; margin-bottom: 5px; }

        .btn-danger { background: var(--red); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-warning { background: var(--gold); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-celeb { background: linear-gradient(45deg, #f59e0b, #ef4444); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4); }
        
        .footer { margin-top: 30px; padding: 15px; font-size: 0.85em; color: rgba(255, 255, 255, 0.5); text-align: center; }
        .footer a { color: var(--blue); text-decoration: none; font-weight: bold; }

        @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div class="main-layout">
        <div class="right-col">
            <div class="panel" style="text-align: center;">
                <img src="logo.png" class="admin-logo" onerror="this.src='https://via.placeholder.com/70'">
                <h2 style="margin:0">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Remy ğŸ‘‘</h2>
                
                <div style="margin-top: 15px; font-size: 0.9em; color: var(--blue);">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø§Ù„Ø¢Ù†:</div>
                <div id="question-text-area">Ø§Ø®ØªØ± Ø³Ø¤Ø§Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø§Ù„Ø£Ø³ÙÙ„...</div>
                <div style="color: var(--accent); font-weight: bold;">Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù†Ù‚Ø·Ø©: <span id="winner-name">---</span></div>
            </div>

            <div class="panel">
                <div class="section-title">ğŸ® Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (30 Ø³Ø¤Ø§Ù„)</div>
                <div class="q-grid" id="btn-container"></div>
                <button class="btn-danger" onclick="sendQ(-1)">ğŸ›‘ Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„</button>
                <button class="btn-warning" onclick="resetRound()">ğŸ”„ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© (ØªØµÙÙŠØ± Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©)</button>
            </div>

            <div class="panel">
              
                <button onclick="startCelebration()" class="btn-celeb">ğŸŠ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ø­ØªÙØ§Ù„ÙŠØ© Ø§Ù„ÙÙˆØ² Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹</button>
            </div>
        </div>

        <div class="left-col">
            <div class="panel">
                <div class="section-title">âš¡ Ø£Ø³Ø±Ø¹ 10 ÙÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div id="fastest-list" class="list-container">
                    <p style="color:#666; font-size: 0.9em; text-align: center;">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª...</p>
                </div>
            </div>

            <div class="panel">
                <div class="section-title">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† (Ø§Ù„Ø£ÙƒØ«Ø± Ù†Ù‚Ø§Ø·Ø§Ù‹)</div>
                <div id="leaderboard" class="list-container"></div>
            </div>
        </div>
    </div>

    <script>
        // --- Firebase Config ---
        const config = { 
            apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
            authDomain: "fawazir-jaco.firebaseapp.com",
            databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fawazir-jaco",
            storageBucket: "fawazir-jaco.firebasestorage.app",
            messagingSenderId: "862747657100",
            appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
        };
        firebase.initializeApp(config);
        const db = firebase.database();

        // Ù…ØµÙÙˆÙØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù€ 30
        const myQuestions = [
 { q: "Ù…Ù† Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ø¬Ù…Ø¹ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙÙŠ Ù…ØµØ­Ù ÙˆØ§Ø­Ø¯ Ø£ÙˆÙ„ Ù…Ø±Ø©ØŸ" },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ù…ÙƒÙŠØ© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ" },
            { q: "Ù…Ø§ Ø¢Ø®Ø± Ø³ÙˆØ±Ø© Ù†Ø²Ù„Øª ÙƒØ§Ù…Ù„Ø©ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„ØµØ­Ø§Ø¨ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨ØªØ±Ø¬Ù…Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªÙŠ ÙÙØ±Ø¶Øª ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ" },
            { q: "ÙƒÙ… Ø³Ù†Ø© Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ø¯Ø¹ÙˆØ© Ø§Ù„Ø³Ø±ÙŠØ©ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ù…Ø¤Ø°Ù† ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ Ù†Ø²Ù„Øª Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ Ù…Ø¹Ø±ÙƒØ© Ø§Ù„ÙŠØ±Ù…ÙˆÙƒØŸ" },
            { q: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© ÙÙØ±Ø¶ ØµÙŠØ§Ù… Ø±Ù…Ø¶Ø§Ù†ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø¢Ø®Ø± Ù…Ù† ØªÙˆÙÙŠ Ù…Ù† Ø§Ù„Ø¹Ø´Ø±Ø© Ø§Ù„Ù…Ø¨Ø´Ø±ÙŠÙ† Ø¨Ø§Ù„Ø¬Ù†Ø©ØŸ" },
            { q: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø°ÙŠ ØªÙˆÙÙŠ ÙÙŠÙ‡ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŸ" },
            { q: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… ØªØ£Ø³Ø³Øª Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø°ÙŠ Ø£Ø³Ø³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ" },
            { q: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ø§Ù‡Ø¯Ø© Ø§Ù„ØªÙŠ Ø£Ù†Ù‡Øª Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ" },
            { q: "Ù…Ø§ Ø£Ù‚Ø¯Ù… Ø¹Ø§ØµÙ…Ø© Ù„Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙŠ ØªÙØ¹Ø¯ Ù…Ù‡Ø¯ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ" },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø¨ÙˆØ§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ø­Ø±Ø§Ù… Ø­Ø§Ù„ÙŠÙ‹Ø§ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ØŸ" },
            { q: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø°ÙŠ ÙˆÙØ¶Ø¹ Ø¹Ù„ÙŠÙ‡ Ù‚Ø¯Ù… Ø§Ù„Ù†Ø¨ÙŠ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø¬Ø¯Ø§Ø± Ù†ØµÙ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ Ø¨Ø¬ÙˆØ§Ø± Ø§Ù„ÙƒØ¹Ø¨Ø© ÙŠØ³Ù…Ù‰ØŸ" },
            { q: "Ø£ÙŠÙ† ÙŠÙ‚Ø¹ Ø§Ù„Ù…ÙŠØ²Ø§Ø¨ ÙÙŠ Ø§Ù„ÙƒØ¹Ø¨Ø©ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯ Ù†Ù‚ØµØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙˆÙ„Ø¯ ÙƒØ¨ÙŠØ±Ù‹Ø§ ÙˆÙŠÙ…ÙˆØª ØµØºÙŠØ±Ù‹Ø§ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙØ¨ØªÙ„ Ø­ØªÙ‰ Ù„Ùˆ Ø¯Ø®Ù„ Ø§Ù„Ù…Ø§Ø¡ØŸ" },
            { q: "Ù…Ø§ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ø±ØµÙƒ Ø¨Ù„Ø§ ÙŠØ¯ÙŠÙ†ØŸ" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ Ù„Ù‡ Ø£Ø³Ù†Ø§Ù† ÙˆÙ„Ø§ ÙŠØ¹Ø¶ØŸ" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ØªØ°Ø¨Ø­Ù‡ ÙˆØªØ¨ÙƒÙŠ Ø¹Ù„ÙŠÙ‡ØŸ" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØªÙƒÙ„Ù… ÙƒÙ„ Ù„ØºØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ" },
            { q: "Ø´ÙŠØ¡ ØªØ±Ø§Ù‡ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ 3 Ù…Ø±Ø§Øª ÙˆÙÙŠ Ø§Ù„Ù†Ù‡Ø§Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©ØŸ" },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø¨ÙŠ Ø§Ù„Ø°ÙŠ Ù„ÙÙ‚Ø¨ Ø¨ÙƒÙ„ÙŠÙ… Ø§Ù„Ù„Ù‡ØŸ" }
        ];

        const container = document.getElementById("btn-container");
        for(let i=0; i<30; i++) {
            let b = document.createElement("button");
            b.className = "q-btn"; b.innerText = "Ø³" + (i+1);
            b.id = "q" + i;
            b.onclick = () => sendQ(i);
            container.appendChild(b);
        }

        function sendQ(idx) {
            db.ref('currentQuestion').set(idx);
            db.ref('celebration').remove(); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø­ØªÙØ§Ù„ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯
        }



        function startCelebration() {
            db.ref('celebration').set({ timestamp: Date.now() });
        }

        function resetRound() {
            if(confirm("Ø³ÙŠØªÙ… ØªØµÙÙŠØ± Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø¨Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
                db.ref('roundVersion').transaction(v => (v || 0) + 1);
                db.ref('winners').remove();
                db.ref('answers_logs').remove();
            }
        }

        db.ref('currentQuestion').on('value', snap => {
            const idx = snap.val();
            document.querySelectorAll(".q-btn").forEach(b => b.classList.remove("active"));
            if(idx !== -1 && idx !== null) {
                if(document.getElementById("q"+idx)) document.getElementById("q"+idx).classList.add("active");
                const qData = myQuestions[idx];
                document.getElementById("question-text-area").innerText = qData ? qData.q : "Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… " + (idx+1);

                db.ref('answers_logs/' + idx).orderByChild('timestamp').limitToFirst(10).on('value', s => {
                    const list = document.getElementById("fastest-list");
                    list.innerHTML = "";
                    if(!s.exists()) { list.innerHTML = "<p style='text-align:center; color:#666'>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø£Ø³Ø±Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª...</p>"; return; }
                    let count = 1;
                    s.forEach(child => {
                        list.innerHTML += `<div class="name-item fast-track">
                            <span>${count}. <b>${child.val().name}</b></span>
                            <span style="color:var(--accent)">âœ“ Ø¬Ø§ÙˆØ¨</span>
                        </div>`;
                        count++;
                    });
                });
                db.ref('winners/'+idx).on('value', s => {
                    document.getElementById("winner-name").innerText = s.exists() ? s.val().name : "---";
                });
            } else {
                document.getElementById("question-text-area").innerText = "Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ù…ØªÙˆÙ‚ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹";
            }
        });

        db.ref('users').on('value', snap => {
            const data = snap.val() || {};
            const sorted = Object.values(data).sort((a,b) => (b.points || 0) - (a.points || 0)).slice(0, 10);
            const list = document.getElementById("leaderboard");
            list.innerHTML = "";
            sorted.forEach((p, i) => {
                let medal = i===0 ? "ğŸ¥‡ " : i===1 ? "ğŸ¥ˆ " : i===2 ? "ğŸ¥‰ " : (i+1)+". ";
                list.innerHTML += `<div class="name-item leader-track">
                    <span>${medal}<b>${p.name}</b></span>
                    <span style="color:var(--gold)">${p.points || 0} Ù†</span>
                </div>`;
            });
        });
    </script>
    <footer class="footer">
        ØªÙ… Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© <a href="https://www.instagram.com/taz7i_/" target="_blank">Ø³Ø§Ù…Ø±</a> ğŸ› ï¸
    </footer>
</body>
</html>
