<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู Remy ุงูุงุญุชุฑุงููุฉ | ุชุทููุฑ ุณุงูุฑ ๐</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --bg: #0a1120; --card: #162136; --blue: #38bdf8; --red: #e94560; --text: #ffffff; --accent: #10b981; --gold: #f59e0b; }
        body { margin: 0; padding: 20px; background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; }
        .main-layout { display: grid; grid-template-columns: 1fr 350px; gap: 20px; width: 100%; max-width: 1150px; }
        .panel { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid rgba(56, 189, 248, 0.2); margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .admin-logo { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--blue); margin-bottom: 10px; }
        .q-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; margin: 15px 0; }
        .q-btn { background: rgba(255, 255, 255, 0.05); color: var(--blue); border: 1px solid rgba(56, 189, 248, 0.3); padding: 12px 5px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em; transition: 0.3s; }
        .q-btn.active { background: var(--blue); color: #000; box-shadow: 0 0 15px var(--blue); }
        .section-title { border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 8px; margin-bottom: 15px; color: var(--blue); font-size: 1.1em; font-weight: bold; }
        #question-text-area { margin: 15px 0; font-size: 1.8em; color: #fff; font-weight: bold; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; border-right: 4px solid var(--blue); min-height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        
        .opt-preview { 
            background: rgba(56, 189, 248, 0.1); 
            border: 1px solid rgba(56, 189, 248, 0.3); 
            padding: 6px 15px; 
            border-radius: 15px; 
            font-size: 0.7em; 
            color: #38bdf8; 
            margin: 4px; 
            display: inline-block; 
            filter: blur(6px); 
            cursor: pointer;
            transition: 0.3s;
            user-select: none;
        }
        .opt-preview.revealed { filter: blur(0); background: rgba(16, 185, 129, 0.2); border-color: var(--accent); color: white; }
        
        .list-container { max-height: 400px; overflow-y: auto; text-align: right; }
        .name-item { display: flex; justify-content: space-between; padding: 10px 12px; margin-bottom: 6px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 0.95em; border-right: 3px solid transparent; }
        .fast-track { border-right-color: var(--accent); }
        .leader-track { border-right-color: var(--gold); }
        .btn-danger { background: var(--red); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-warning { background: var(--gold); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-celeb { background: linear-gradient(45deg, #f59e0b, #ef4444); color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="main-layout">
        <div class="right-col">
            <div class="panel" style="text-align: center;">
                <img src="logo.png" class="admin-logo" onerror="this.src='https://via.placeholder.com/70'">
                <h2 style="margin:0">ููุญุฉ ุชุญูู Remy ๐</h2>
                <div style="margin-top: 15px; font-size: 0.9em; color: var(--blue);">ุงูุณุคุงู ุงููุจุงุดุฑ ุงูุขู:</div>
                <div id="question-text-area">ุงุฎุชุฑ ุณุคุงูุงู ูู ุงูุดุจูุฉ...</div>
                <div style="color: var(--accent); font-weight: bold;">ุงููุงุฆุฒ ุจุงูููุทุฉ: <span id="winner-name">---</span></div>
            </div>
            <div class="panel">
                <div class="section-title">๐ฎ ุงูุชุญูู ุจุงูุฃุณุฆูุฉ</div>
                <div class="q-grid" id="btn-container"></div>
                <button class="btn-danger" onclick="sendQ(-1)">๐ ุฅููุงู ูุฅุฎูุงุก ุงูุณุคุงู</button>
                <button class="btn-warning" onclick="resetRound()">๐ ุชุตููุฑ ุฅุฌุงุจุงุช ุงูุฃุฌูุฒุฉ</button>
            </div>
            <button onclick="startCelebration()" class="btn-celeb">๐ ุฅุทูุงู ุงุญุชูุงููุฉ ุงูููุฒ</button>
        </div>
        <div class="left-col">
            <div class="panel">
                <div class="section-title">โก ุฃุณุฑุน 10 ูู ุงูุณุคุงู ุงูุญุงูู</div>
                <div id="fastest-list" class="list-container"></div>
            </div>
            <div class="panel">
                <div class="section-title">๐ ุงููุชุตุฏุฑูู (ุงูููุงุท)</div>
                <div id="leaderboard" class="list-container"></div>
            </div>
        </div>
    </div>

    <script>
        const config = { 
            apiKey: "AIzaSyBxqfLt3o3JWy_vwnpwSQPIVdtEDGoYB6k",
            authDomain: "fawazir-jaco.firebaseapp.com",
            databaseURL: "https://fawazir-jaco-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "fawazir-jaco",
            storageBucket: "fawazir-jaco.firebasestorage.app",
            messagingSenderId: "862747657100",
            appId: "1:862747657100:web:d52ecee9373a5e33fd8ca9"
        };
        firebase.initializeApp(config);
        const db = firebase.database();

        const myQuestions = [
{ q: "ูก/ูุง ูู ุงูุดู ุงูุฐู ุชูุณูู ุฏูู ุงู ุชููุณูุ", options: ["ุงููุนุฏ", "ุงูููุณ", "ุงูุฌูู"] },
  { q: "ูข/ูุง ูู ุงูุดูุก ุงูุฐู ููุณุชุฎุฏู ูุชูุญูุฏ ููู ุงูุจุดุฑุฉ ูุฅุฎูุงุก ุงูุนููุจุ", options: ["ุงููุงููุฏูุดู", "ุงููุงููุงูุชุฑ", "ุงูุชููุฑ"] },
  { q: "ูฃ/ุณูุงุฑุฉ \"ุชูุณูุง\" (Tesla) ูุดููุฑุฉ ุจุฃููุง ุชุนูู ุจููุงุฐุงุ", options: ["ุงูุจูุฒูู", "ุงูููุฑุจุงุก", "ุงููุญู"] },
  { q: "ูค/ุฎูู ุงููุซู ูู ุงูุงูููุฌู: ๐ซฒ๐ฅ๐ซฒ๐งุ", options: ["ุงููู ูุฏู ูุญุชุฑูู ูู ูุซู ุงููู ูุฏู ูุซูุฌู", "ุงููู ูุฏู ูู ุงููุงุฑ ูู ูุซู ุงููู ูุฏู ูู ุงููููุง", "ุงููู ูุฏู ููุชูุจู ูู ูุซู ุงููู ูุฏู ูู ุงูุจุฑุงุฏ"] },
  { q: "ูฅ/ุฎูู ุงูุงููู ูู ุงูุงูููุฌู: ๐๐ุ", options: ["ุจุณุจูุณู", "ุจุณู ุชุญุจ ุงูุจุณุจูุณู", "ุงูุงูุณุงู ูุญุจ ูุงูู ุงูุจุณู"] },
  { q: "ูฆ/ูุงุฏู ุงูุงุชุญุงุฏุ ูุง ูู ุงูุญููุงู ุงูููุฌูุฏ ูู ุดุนุงุฑู ููููุจ ุจูุ", options: ["ุงูุตูุฑ", "ุงูููุฑ", "ุงูุฐุฆุจ"] },
  { q: "ูง/ุฃูู ููุน ุงูุจุญุฑ ุงูุฐู ูุง ููุฌุฏ ููู ูุทุฑุฉ ูุงุกุ", options: ["ูู ุงููุถุงุก", "ุนูู ุงูุฎุฑูุทุฉ", "ูู ุงูุตุญุฑุงุก ุงููุจุฑู"] },
  { q: "ูจ/ูุงุฐุง ูุณุชุฎุฏู ูุชูุธูู ุงูุฃุฎุทุงุก ุงูุจุณูุทุฉ ูู ุงููุญูุ", options: ["ุฃุนูุงุฏ ุงููุทู ูุน ูุฒูู ูููุงุฌ", "ุงูููุญุงุฉ", "ุงููุงุก ูุงูุตุงุจูู ูุจุงุดุฑุฉ"] },
  { q: "ูฉ/ูุง ูู ุงูุดูุก ุงูุฐู ููุชูู ุฑุฆุฉ ููุง ูุชููุณุ", options: ["ุงูุงุณููุฌู", "ุงูุณูุงุฑู", "ุงููููุงุฎ"] },
  { q: "ูกู/ูุง ูู ุงูุดูุก ุงูุฐู ููุชูู ุนุฑููุงู ููุง ูุฌุฑู ูููุง ุฏูุ", options: ["ูุฑูุฉ ุงูุดุฌุฑ", "ุงูุฑุฎุงู", "ุงูุฎุฑูุทุฉ"] },
  { q: "ูกูก/ุงู ุตูุงู ูุง ููุฌุฏ ูููุง ูุง ุฑููุน ู ูุง ุณุฌูุฏุ", options: ["ุตูุงุฉ ุงูุงุณุชุณูุงุก", "ุตูุงุฉ ุงูุฌูุงุฒุฉ", "ุตูุงุฉ ุงููุณูู"] },
  { q: "ูกูข/ุดู ููุชูู ุฑูุดุงู ู ูุง ูุทูุฑุ", options: ["ุงููุฎุฏู", "ุงูุฏุฌุงุฌุฉ", "ุงูุณูู"] },
  { q: "ูกูฃ/ูุง ูู ุงูููู ุงูุฐู ูุงู ุงููุจู ๏ทบ ูุญุจ ูุจุณู ูุซูุฑุงูุ", options: ["ุงูุงุญูุฑ", "ุงูุงุจูุถ", "ุงูุงุฎุถุฑ"] },
  { q: "ูกูค/ูุง ูู ุงูุดู ุงูุฐู ููุชูู ุงุจูุงูุงู ู ูค ุงุตุงุจุน ููููู ููุณ ุญูุงูุ", options: ["ุงูููุงุฒ", "ุงูุชูุซุงู", "ูุฏ ุงูุจุดุฑ"] },
  { q: "ูกูฅ/ูุงุฐุง ูุนูู SPF ูู ูุงูู ุงูุดูุณุ", options: ["ุนุงูู ุงูุญูุงูุฉ ูู ุงูุดูุณ", "ุณุนุฑ ุงูููุชุฌ", "ุงุณู ุงูุดุฑูุฉ"] },
{ q: "ูกูฆ/ูุง ูู ูุถู ูุฑุงุกุฉ ุณูุฑุฉ ุงูููู ููู ุงูุฌูุนุฉุ options: ["ุชุฒูุฏ ุงูุฑุฒู", "ุชุถูุก ูููุณูู ููุฑุงู ุจูู ุงูุฌูุนุชูู", "ุชุญูู ูู ุงููุฑุถ"] },
  { q: "ูกูง/ุฎูู ุงูุงุณู ูู ุงูุงูููุฌู: ุงุณ ๐ง", options: ["ุงุณูุงุก", "ุงุณูุทุฑุฉ", "ูุงุณู"] },
  { q: "ูกูจ/ูุง ูู ุงูุดู ุงูุฐู ุชุฑุงู ูู ุงูููู ูฃูุฑุงุช ุ", options: ["ุงููุฌูู", "ุญุฑู ุงููุงู", "ุงูููุฑ"] },
  { q: "ูกูฉ/ูุง ูู ุงูุทูุฑ ุงูุฐู ููููู ุงูุทูุฑ ุงูู ุงูุฎูู ุ", options: ["ุงูุฎูุงุด", "ุงูุทูุงู", "ุงูุจููุฉ"] },
  { q: "ูขู/ุฅุฐุง ูุงู ููุงู 3 ุชูุงุญุงุช ูุฃุฎุฐุช ูููู ุชูุงุญุชููุ ููู ุชูุงุญุฉ ูุนูุ", options: ["ุชูุงุญุชูู ุงููู ูุนุงู", "ุชูุงุญู", "ูฃ ุชูุงุญุงุช"] },
  { q: "ูขูก/ูู ุงูู ูู ุงุณุชุฎุฏู ุงูุจูุตููุ", options: ["ุงูุตูู", "ุงูุณุนูุฏูู", "ุงููููุช"] },
  { q: "ูขูข/ุฎูู ุงููุซู: ๐ฑ + ๐ญ + ๐ = ุ", options: ["ุงู ุบุงุจ ุงููุท ุงูุนุจ ูุง ูุงุฑ", "ุงู ุบุงุจ ุงููุท ุงูุนุจ ูุง ููุจ", "ุงู ุบุงุจ ุงููุงุฑ ุงูุนุจ ูุง ูุท"] },
  { q: "ูขูฃ/ูุง ูู ุงูุดูุก ุงูุฐู ูุง ูุฃูู ููุง ูุดุฑุจุ ููุน ุฐูู ุฐูุฑ ูู ุงููุฑุขู ุฃูู \"ูุชููุณ\"ุ", options: ["ุงูุฌููู", "ุงูุตุจุญ", "ุงูุฌุจุงู"] },
  { q: "ูขูค/ุณูุงุฑุฉ ุฑูุงุถูุฉ ุดุนุงุฑูุง \"ุงูุซูุฑ ุงููุงุฆุฌ\"ุ", options: ["ููุณุชูุฌ", "ูุงูุจูุฑุฌููู", "ููุฑุงุฑู"] },
  { q: "ูขูฅ/ูุง ูู ุงุฎุฑ ุณูุฑุฉ ูุฒูุช ุจุงููุฑุฃู ุ", options: ["ุงููุตุฑ", "ุงูููู", "ุงูุงุฎูุงุต"] },
  { q: "ูขูฆ/ุดูุก ููุฌูุฏ ูู ุงูุดูุทุฉ ูุธููุชู ูุฑูุน ุงูุณูุงุฑุฉ ุนุดุงู ุชุบูุฑ ุงูููุฑุ", options: ["ุงูููุชุงุญ", "ุงูุนูุฑูุชุฉ", "ุงูููุน"] },
  { q: "ูขูง/ูู ุนุฏุฏ ููุฑุงุช ุงูุนููุฏ ุงูููุฑูุ", options: ["33", "34", "40"] },
  { q: "ูขูจ/ูู ูู ุงููุจู ุงูุฐู ูุงูุช ูุนุฌุฒุชู \"ุงููุงูุฉ\" ุงูุชู ุฎุฑุฌุช ูู ุงูุตุฎุฑุ", options: ["ุณูุฏูุง ููุฏ ุนููู ุงูุณูุงู", "ุณูุฏูุง ุตุงูุญ ุนููู ุงูุณูุงู", "ุณูุฏูุง ุดุนูุจ ุนููู ุงูุณูุงู"] },
  { q: "ูขูฉ/ุณูุฑุฉ ูู ุงููุฑุขู ุงููุฑูู ุฐููุฑ ูููุง \"ุงูุฐุจุงุจ\" ู \"ุงูุจุนูุถ\"ุ", options: ["ุณูุฑุฉ ุงููุญู", "ุณูุฑุฉ ุงูุจูุฑุฉ", "ุณูุฑุฉ ุงูููู"] },
  { q: "ูฃู/ุฃูุดุฏู ุนู ุฑุฌูู ุณุฑูุน ุงูุฎุทุงูู.. ููุดู ุนูู ูุจุฏู ููุง ูู ุฑุฌูููุ ููุจู ุญุฏูุฏ ูููุชู ูู ุงูุนุฒุงูู.. ุตูุชู ููุฒู ุงูุฃุฑุถ ุจูู ุงูุญูู ูุงูุญููุ", options: ["ุงููุทุงุฑ", "ุงูุณููู", "ุงูุฑุนุฏ"] }
        ];

        const container = document.getElementById("btn-container");
        for(let i=0; i<30; i++) {
            let b = document.createElement("button");
            b.className = "q-btn"; b.innerText = "ุณ" + (i+1); b.id = "q" + i;
            b.onclick = () => sendQ(i); container.appendChild(b);
        }

        function sendQ(idx) {
            if (idx === -1) {
                db.ref('currentQuestion').set(-1);
                db.ref('questionStartTime').remove();
            } else {
                db.ref('currentQuestion').set(idx);
                db.ref('questionStartTime').set(firebase.database.ServerValue.TIMESTAMP);
            }
            db.ref('celebration').remove();
        }

        function startCelebration() { db.ref('celebration').set({ timestamp: Date.now() }); }
        
        function resetRound() {
            if(confirm("ุชุตููุฑ ุงูุฅุฌุงุจุงุช ูุจุฏุก ุณุคุงู ุฌุฏูุฏุ (ุณูุชู ูุณุญ ุณุฌู ุงููุญุงููุงุช ุฃูุถุงู)")) {
                db.ref('roundVersion').transaction(v => (v || 0) + 1);
                db.ref('winners').remove();
                db.ref('answers_logs').remove();
                db.ref('attempts').remove(); 
                alert("ุชู ุงูุชุตููุฑ ุจูุฌุงุญ! ๐");
            }
        }

        db.ref('currentQuestion').on('value', snap => {
            const idx = snap.val();
            document.querySelectorAll(".q-btn").forEach(b => b.classList.remove("active"));
            const displayArea = document.getElementById("question-text-area");

            if(idx !== -1 && idx !== null) {
                if(document.getElementById("q"+idx)) document.getElementById("q"+idx).classList.add("active");
                const qData = myQuestions[idx];
                
                let html = `<div style="margin-bottom:12px; font-size:1.1em;">${qData.q}</div><div>`;
                if(qData.options) {
                    qData.options.forEach(opt => { 
                        html += `<span class="opt-preview" onclick="this.classList.toggle('revealed')">${opt}</span>`; 
                    });
                }
                html += `</div><small style="color:gray; font-size: 0.5em; display:block; margin-top:10px;">(ุงููุฑ ุนูู ุงูุฎูุงุฑ ูููุดู)</small>`;
                displayArea.innerHTML = html;

                db.ref('answers_logs/' + idx).orderByChild('timestamp').limitToFirst(10).on('value', s => {
                    const list = document.getElementById("fastest-list");
                    list.innerHTML = "";
                    if(!s.exists()) { list.innerHTML = "<p style='text-align:center; color:#666'>ุจุงูุชุธุงุฑ ุงูุฅุฌุงุจุงุช...</p>"; return; }
                    let count = 1;
                    s.forEach(child => {
                        list.innerHTML += `<div class="name-item fast-track"><span>${count}. <b>${child.val().name}</b></span><span style="color:var(--accent)">โ</span></div>`;
                        count++;
                    });
                });
                db.ref('winners/'+idx).on('value', s => { document.getElementById("winner-name").innerText = s.exists() ? s.val().name : "---"; });
            } else {
                displayArea.innerText = "ุงููุณุงุจูุฉ ูุชูููุฉ ุญุงููุงู";
                document.getElementById("fastest-list").innerHTML = "";
            }
        });

        db.ref('users').on('value', snap => {
            const data = snap.val() || {};
            const sorted = Object.values(data).sort((a,b) => (b.points || 0) - (a.points || 0)).slice(0, 10);
            const list = document.getElementById("leaderboard");
            list.innerHTML = "";
            sorted.forEach((p, i) => {
                let medal = i===0 ? "๐ฅ " : i===1 ? "๐ฅ " : i===2 ? "๐ฅ " : (i+1)+". ";
                list.innerHTML += `<div class="name-item leader-track"><span>${medal}<b>${p.name}</b></span><span style="color:var(--gold)">${p.points || 0} ู</span></div>`;
            });
        });
    </script>
</body>
</html>
